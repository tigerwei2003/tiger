<include file="Public/header" />
<script type="text/javascript">
	$(document).ready(function() {
		$.formValidator.initConfig({
			autotip : true,
			formid : "basic_validate",
			onerror : function(msg) {
			}
		});
		$("#device_name").formValidator({
			onshow : "请输入名称!",
			onfocus : "请输入名称!"
		}).inputValidator({
			min : 1,
			onerror : "请输入名称!"
		});
		$("#hardware").formValidator({
			onshow : "请输入硬件信息!",
			onfocus : "请输入硬件信息!"
		}).inputValidator({
			min : 1,
			onerror : "请输入硬件信息!"
		});
		$("#product").formValidator({
			onshow : "请输入商品信息",
			onfocus : "请输入商品信息!"
		}).inputValidator({
			min : 1,
			onerror : "请输入商品信息!"
		});
		$("#model").formValidator({
			onshow : "请输入型号!",
			onfocus : "请输入型号!"
		}).inputValidator({
			min : 1,
			onerror : "请输入型号!"
		});
		$("#manu").formValidator({
			onshow : "请输入制造商!",
			onfocus : "请输入制造商!"
		}).inputValidator({
			min : 1,
			onerror : "请输入制造商!"
		});
		$("#bitrate").formValidator({
			onshow : "请输入码率!(以kbps为单位)",
			onfocus : "请输入码率!(以kbps为单位)"
		}).inputValidator({
			min : 1,
			onerror : "请输入码率!(以kbps为单位)"
		});
	});
</script>
<link rel="stylesheet" href="__HTML__/css/uniform.css" />
<link rel="stylesheet" href="__HTML__/css/jquery-calendar.css" />
<div id="content">
	<div id="content-header">
		<h1>编辑擂台信息</h1>
	</div>
	<div id="breadcrumb">
		<a href="{:U('Index/index')}" title="Go to Home" class="tip-bottom"><i
			class="icon-home"></i> 后台首页</a> <a href="{:U('Arena/index')}"
			class="current">擂台管理</a> <a href="javascript:;"
			onClick="javascript:history.go(-1);" class="tip-bottom" id="gotoback"><i
			class="icon-share-alt"></i> 返回</a>
	</div>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span12">
				<div class="widget-box">
					<div class="widget-title">
						<span class="icon"><i class="icon-pencil"></i></span>
						<h5>编辑擂台信息</h5>
					 <a
							href="{:U('Arena/index')}"><span class="label btn-primary"><i
								class=" icon-list-alt icon-white"></i> 擂台管理</span></a> 
					</div>
					<div class="widget-content nopadding">
						<form class="form-horizontal" method="post"
							action="{:U('Arena/arena_edit')}" name="basic_validate"
							id="basic_validate" enctype="multipart/form-data" novalidate >
						<input type="hidden" name="dosubmit" value="1" /> <input
							type="hidden" name="editdate" value="{$row.id}" />
						<div class="control-group">
							<label class="control-label">擂台类型</label>
							<div class="controls">
								<select name="info[arena_type]" id="arena_type">
									<option value="0"
										<php>if($row['arena_type'] == '0'){echo 'selected';}</php>
										>普通场
									</option>
									<option value="1"
										<php>if($row['arena_type'] == '1'){echo 'selected';}</php>
										>练习场
									</option>
								</select>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">擂台名称</label>
							<div class="controls">
								<input type="text" name="info[arena_name]"
									value="{$row.arena_name}" id="arena_name" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">游戏</label>
							<div class="controls">
								<select name="info[game_id]" id="type">
									<volist name="gamelist" id="data">
									<option value="{$data.game_id}"
										<php>if($row['game_id'] == $data['game_id']){echo
										'selected';}</php>
										>{$data.game_name}
									</option>
									</volist>
								</select>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">擂台图片</label>
							<div class="controls">
								<input type="file" name="arena_pic" id="arena_pic" value="请选择文件"
									onblur="check_files(this)" /><br> <span
									id='arena_pic_up_file'></span>
								<php>if($row['arena_pic'] != ''){echo '<img
									src="'.$row['arena_pic'].'@100w_50h.jpg" />';}</php>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">擂台满员人数</label>
							<div class="controls">
								<input type="text" name="info[max_number]"
									value="{$row.max_number}" id="max_number" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">最大比赛人数</label>
							<div class="controls">
								<input type="text" name="info[max_player]"
									value="{$row.max_player}" id="max_player" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">最大排队人数</label>
							<div class="controls">
								<input type="text" name="info[max_queue_num]"
									value="{$row.max_queue_num}" id="max_queue_num" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">进入擂台的最低级别</label>
							<div class="controls">
								<input type="text" name="info[min_skill_level]"
									value="{$row.min_skill_level}" id="min_skill_level" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">所属区域</label>
							<div class="controls">
								<select name="info[region_id]" id="type">
									<volist name="regionlist" id="data">
									<option value="{$data.id}"
										<php>if($row['region_id'] == $data['id']){echo
										'selected';}</php>
										>{$data.name}
									</option>
									</volist>
								</select>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">gsd_id</label>
							<div class="controls">
								<input type="text" name="info[gsd_id]" value="{$row.gsd_id}"
									id="gsd_id" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">gsd_ip</label>
							<div class="controls">
								<input type="text" name="info[gsd_ip]" value="{$row.gsd_ip}"
									id="gsd_ip" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">gs_id</label>
							<div class="controls">
								<input type="text" name="info[gs_id]" value="{$row.gs_id}"
									id="gs_id" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">gs_ip</label>
							<div class="controls">
								<input type="text" name="info[gs_ip]" value="{$row.gs_ip}"
									id="gs_ip" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">gs_port</label>
							<div class="controls">
								<input type="text" name="info[gs_port]" value="{$row.gs_port}"
									id="gs_port" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">gs_pid</label>
							<div class="controls">
								<input type="text" name="info[gs_pid]" value="{$row.gs_pid}"
									id="gs_pid" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">码率</label>
							<div class="controls">
								<input type="text" name="info[bitrate]" value="{$row.bitrate}"
									id="bitrate" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">直播URL(标准)</label>
							<div class="controls">
								<input type="text" name="info[live_url]" value="{$row.live_url}"
									id="live_url" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">直播URL(高清)</label>
							<div class="controls">
								<input type="text" name="info[hd_live_url]"
									value="{$row.hd_live_url}" id="hd_live_url" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">直播URL(流畅)</label>
							<div class="controls">
								<input type="text" name="info[fluent_live_url]"
									value="{$row.fluent_live_url}" id="fluent_live_url" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">开启时间</label>
							<div class="controls">
								<input type="text" name="info[open_time]"
									value="<?php if($row['open_time']){ echo $row['open_time'];} ?>"
									maxlength="5" onfocus="$(this).calendar()" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">关闭时间</label>
							<div class="controls">
								<input type="text" name="info[close_time]"
									value="<?php if($row['close_time']){ echo $row['close_time'];} ?>"
									maxlength="5" onfocus="$(this).calendar()" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">状态</label>
							<div class="controls">
								<label style="display: inline !important;"><input
									type="radio" name="info[status]" value="-1"
								<php>if($row['status'] == '-1'){echo 'checked';}</php>/>不显示</label> <label
									style="display: inline !important;"><input type="radio"
									name="info[status]" value="1"
								<php>if($row['status'] == '1'){echo 'checked';}</php>/>启用</label> <label
									style="display: inline !important;"><input type="radio"
									name="info[status]" value="0"
								<php>if($row['status'] == '0'){echo 'checked';}</php>/>禁用</label>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">擂台规则</label>
							<div class="controls">
								<div style="width: 95%">
									<?php echo editor('arena_rule',$row['arena_rule']); ?>
								</div>
							</div>
						</div>
						<div class="form-actions">
							<input type="submit" value="保存" class="btn btn-primary" />
						</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<div class="row-fluid">
			<div id="footer" class="span12">{:C('SEO_COPYRIGHT')}</div>
		</div>
	</div>
</div>



<script src="__HTML__/js/jquery.uniform.js"></script>
<script src="__HTML__/js/unicorn.tables.js"></script>
<script src="__HTML__/js/jquery-calendar.js"></script>
<script type="text/javascript">
	//验证存档文件类型	
	function check_files(obj) {
		var gamesave = $("#" + obj.id).val();
		//文件类型  图片 格式
		var regfile = /^.+\.(jpg|png|bmp|jpeg)$/;
		if (gamesave == "") {
			$('#' + obj.id + "_up_file").html(
					"<font color='red'>请选择一个存档文件</font>");
			flag4 = 0;
			return false;
		}
		if (!regfile.test(gamesave)) {
			$('#' + obj.id + "_up_file").html(
					"<font color='red'>文件格式必须为.(jpg|png|bmp|jpeg)！</font>");
			flag4 = 0;
			return false;
		}
		$('#' + obj.id + "_up_file").html("<font color='green'>√</font>");
		flag4 = 1;
		return true;
	}
</script>

<include file="Public/footer" />